<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="index.css">
<title>Shoppy Cart</title>

<div class="page-container">
  <header>
    <h1 class="logo">Sweet-Ass Chocolate Wow</h1>
  </header>
  <main>
    <article class="catalog">
      <h2>Products</h2>
    </article>
    <aside class="sidebar">
      <div class="sticky-cart">
        <button>View Cart</button>
        <p class="cart-count">0 items</p>
      </div>
    </aside>
  </main>
  <footer>
    <small>there was no footer in the mocks but I like them.</small>
  </footer>
</div>

<div id="modal">

  <div class="modal-cart-container">
    <h1>Your Cart</h1>
    <div class="modal-cart-items"></div>
    <div class="modal-cart-controls">
      <button class="clear-cart">Clear</button>
      <button class="modal-close">Close</button>
    </div>
  </div>
</div>

<script src="../src/utils.js"></script>
<script src="../src/store.js"></script>
<script src="../src/store_ui.js"></script>
<script src="../src/cart.js"></script>
<script src="../src/cart_ui.js"></script>

<script>
  fetch('data/inventory.json')
  .then(response => response.json())
  .then(function(inventory) {
    var store = createStore(inventory.chocolates);
    renderStore(document.querySelector('article.catalog'), store);
  });

  var cart = createCart();
  cartUI.init(cart, {
    itemsContainer: document.querySelector('.modal-cart-items'),
    countContainer: document.querySelector('.sidebar .cart-count'),
    clearButton: document.querySelector('.clear-cart')
  });

  var pageContainer = document.querySelector('.page-container');
  var modal = document.getElementById('modal');

  function openModal() {
    modal.classList.add('open');
    pageContainer.classList.add('modal-open');
  }

  document.querySelector('.sticky-cart button').addEventListener('click', openModal);

  function closeModal() {
    modal.classList.remove('open');
    pageContainer.classList.remove('modal-open');
  }

  document.querySelector('.modal-close').addEventListener('click', closeModal);

  // escape key exits modal!
  document.body.addEventListener('keydown', function(e) {
    if (e.keyCode === 27) closeModal();
  });
</script>

