!function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e){e.createElement=function(t,e){e=e||{};var n=document.createElement(t);e.className&&(n.className=e.className);e.text&&(n.textContent=e.text);return n},e.displayPrice=function(t){return"$"+parseFloat(t).toFixed(2)},e.capitalize=function(t){return t.trim().split(" ").map(function(t){return t[0].toUpperCase()+t.slice(1)}).join(" ")}},function(t,e,n){var{createElement:r,displayPrice:a,capitalize:i}=n(0),c=null,o=null,d=null,u=null;function l(){var t,e;!function(){var t;if(o.innerHTML="",0===c.getTotalQuantity())t=r("p",{text:"There are no items in your cart."});else{(t=r("table")).appendChild(((n=r("tr")).appendChild(r("th",{text:"Type"})),n.appendChild(r("th",{text:"Price"})),n.appendChild(r("th",{text:"Qty"})),n.appendChild(r("th")),n));var e=c.map(s);e.forEach(function(e){t.appendChild(e)}),t.appendChild(function(t){var e=r("tr",{className:"cart-count"});return e.insertCell().textContent="Total: "+a(t.getTotalPrice()),e}(c))}var n;t.className="cart-items",o.appendChild(t)}(),t=c.getTotalQuantity(),e=t+(1===t?" item":" items"),d.innerHTML=e}function s(t){var e=r("tr",{className:"cart-item"});return e.insertCell().textContent=i(t.type),e.insertCell().textContent=a(t.price),e.insertCell().textContent=t.quantity,e.insertCell().appendChild(function(t){var e=r("button",{text:"Remove"});return e.addEventListener("click",function(e){var n=new CustomEvent("remove-from-cart",{detail:{id:t.id},bubbles:!0});e.target.dispatchEvent(n)}),e}(t)),e}t.exports={init:function(t,e){c=t,o=e.itemsContainer,d=e.countContainer,u=e.clearButton,l(),document.body.addEventListener("add-to-cart",function(t){c.addItem(t.detail),l()}),document.body.addEventListener("remove-from-cart",function(t){c.removeItem(t.detail.id),l()}),u.addEventListener("click",function(){c.clear(),l()})}}},function(t,e,n){!function(e){(true?t.exports:undefined).createCart=function(){var t=[];function e(e){return t.find(t=>t.id===e)}return{addItem(n){!function(t){if(void 0==t.id)throw new Error("Item must have an id attribute to be added to cart");if(void 0==t.price)throw new Error("Item must have a price attribute to be added to cart")}(n),0===(n=e(n.id)||Object.assign({quantity:0},n)).quantity&&t.push(n),n.quantity+=1},updateQuantity(t,n){var r=e(t);r&&(r.quantity=n)},removeItem(n){var r=e(n);if(r){var a=t.indexOf(r);t.splice(a,1)}},clear(){t=[]},getTotalPrice(){return t.reduce((t,e)=>t+(e=e,e.quantity*e.price),0);var e},getTotalQuantity:()=>t.reduce((t,e)=>t+e.quantity,0),map:e=>t.map(t=>e(Object.assign({},t)))}}}()},function(t,e,n){var{createElement:r,displayPrice:a,capitalize:i}=n(0);function c(t){var e=r("li",{className:"product"}),n=r("div",{className:"product-header"});n.appendChild(r("h3",{text:i(t.type)})),n.appendChild(r("span",{className:"price",text:a(t.price)}));var c=r("button",{text:"Add to Cart"});return c.dataset.id=t.id,n.appendChild(c),e.appendChild(n),e.appendChild(r("p",{className:"product-description",text:t.description})),e}e.renderStore=function(t,e){var n=r("ul");e.map(c).forEach(function(t){n.appendChild(t)}),n.addEventListener("click",function(t){!function(t,e){if("BUTTON"===e.target.tagName){var n=parseInt(e.target.dataset.id,10),r=t.getProduct(n),a=new CustomEvent("add-to-cart",{detail:r,bubbles:!0});e.target.dispatchEvent(a)}}(e,t)}),t.appendChild(n)}},function(t,e){e.createStore=function(t,e=n){return t=t.map(t=>(function(t,e){return function(t,e){var n=Object.keys(t),r=e.filter(e=>!n.includes(e)||null==t[e]);if(r.length)throw new Error(`Product with id #{data.id} is missing required fields ${r}`)}(t,e),Object.assign({},t)})(t,e)),{getProduct:e=>t.find(t=>t.id===e),map:e=>t.map(t=>e(Object.assign({},t)))}};var n=["id","type","price","description"]},function(t,e,n){var{createElement:r,displayPrice:a,capitalize:i}=n(0),{createStore:c}=n(4),{renderStore:o}=n(3),{createCart:d}=n(2),u=n(1);fetch("data/inventory.json").then(t=>t.json()).then(function(t){var e=c(t.cakes);o(document.querySelector("article.catalog"),e)});var l=d();u.init(l,{itemsContainer:document.querySelector(".modal-cart-items"),countContainer:document.querySelector(".sidebar .cart-count"),clearButton:document.querySelector(".clear-cart")});var s=document.querySelector(".page-container"),p=document.getElementById("modal");function m(){p.classList.remove("open"),s.classList.remove("modal-open")}document.querySelector(".sticky-cart button").addEventListener("click",function(){p.classList.add("open"),s.classList.add("modal-open")}),document.querySelector(".modal-close").addEventListener("click",m),document.body.addEventListener("keydown",function(t){27===t.keyCode&&m()})}]);